{"remainingRequest":"C:\\Users\\huawe\\Desktop\\Safety-Application-CS542\\dashboard\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\huawe\\Desktop\\Safety-Application-CS542\\dashboard\\src\\components\\d3vis.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\huawe\\Desktop\\Safety-Application-CS542\\dashboard\\src\\components\\d3vis.vue","mtime":1602815665567},{"path":"C:\\Users\\huawe\\Desktop\\Safety-Application-CS542\\dashboard\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\huawe\\Desktop\\Safety-Application-CS542\\dashboard\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\huawe\\Desktop\\Safety-Application-CS542\\dashboard\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\huawe\\Desktop\\Safety-Application-CS542\\dashboard\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgKiBhcyBkMyBmcm9tICJkMyI7DQppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOw0KDQp2YXIgd2ViY2FsbCA9IGF4aW9zLmNyZWF0ZSh7DQogIGJhc2VVUkw6ICJodHRwOi8vMTI3LjAuMC4xOjUwMDAvIiwNCiAgdGltZW91dDogMjAwMDAsDQogIHdpdGhDcmVkZW50aWFsczogZmFsc2UsDQogIGhlYWRlcnM6IHsgIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uIiB9LA0KfSk7DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogIkFwcCIsDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGdkcDogW10sDQogICAgfTsNCiAgfSwNCiAgbW91bnRlZCgpIHsNCiAgICB0aGlzLmNyZWF0ZUdyYXBoKCk7DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBnZW5lcmF0ZUFyYyhnZHApIHsNCiAgICAgIC8vZGVmaW5lIHRoZSB3aWR0aCBhbmQgaGVpZ2h0IG9mIHRoZSBncmFwaA0KICAgICAgY29uc3QgdyA9IDUwMDsNCiAgICAgIGNvbnN0IGggPSA1MDA7DQogICAgICB2YXIgZ2RwMSA9IGdkcDsNCiAgICAgIC8vY29uc3RydWN0IHRoZSBncmFwaCBpbiB0aGUgZGl2IGFyYw0KICAgICAgY29uc3Qgc3ZnID0gZDMNCiAgICAgICAgLnNlbGVjdCgiI2FyYyIpDQogICAgICAgIC5hcHBlbmQoInN2ZyIpDQogICAgICAgIC5hdHRyKCJ3aWR0aCIsIHcpDQogICAgICAgIC5hdHRyKCJoZWlnaHQiLCBoKTsNCg0KICAgICAgLy8gU29ydCBkYXRhDQogICAgICBjb25zdCBzb3J0ZWRHRFAgPSBnZHAxLnNvcnQoKGEsIGIpID0+IChhLnZhbHVlID4gYi52YWx1ZSA/IDEgOiAtMSkpOw0KDQogICAgICAvL1NldCBDb2xvcg0KICAgICAgY29uc3QgY29sb3IgPSBkMy5zY2FsZU9yZGluYWwoZDMuc2NoZW1lRGFyazIpOw0KDQogICAgICAvL0dldCBtYXggZ2RwDQogICAgICBjb25zdCBtYXhfZ2RwID0gZDMubWF4KHNvcnRlZEdEUCwgKG8pID0+IG8udmFsdWUpOw0KDQogICAgICAvL0RlZmluZSBuZWNlc3NhcnkgY29tcG9uZW50cyBmb3IgZ3JhcGgNCiAgICAgIGNvbnN0IGFuZ2xlU2NhbGUgPSBkMw0KICAgICAgICAuc2NhbGVMaW5lYXIoKQ0KICAgICAgICAuZG9tYWluKFswLCBtYXhfZ2RwXSkNCiAgICAgICAgLnJhbmdlKFswLCAxLjUgKiBNYXRoLlBJXSk7IC8vRGVmaW5lIHdoZXRoZXIgaXQgaXMgZ29pbmcgdG8gYmUgYSBmdWxsIGNpcmNsZQ0KDQogICAgICBjb25zdCBhcmMgPSBkMw0KICAgICAgICAuYXJjKCkNCiAgICAgICAgLmlubmVyUmFkaXVzKChkLCBpKSA9PiAoaSArIDEpICogMjUpDQogICAgICAgIC5vdXRlclJhZGl1cygoZCwgaSkgPT4gKGkgKyAyKSAqIDI1KQ0KICAgICAgICAuc3RhcnRBbmdsZShhbmdsZVNjYWxlKDApKQ0KICAgICAgICAuZW5kQW5nbGUoKGQpID0+IGFuZ2xlU2NhbGUoZC52YWx1ZSkpOw0KDQogICAgICAvLyBQbHVnIHRoZSBncmFwaCBpbnRvIHRoZSByZWdpb24NCiAgICAgIGNvbnN0IGcgPSBzdmcuYXBwZW5kKCJnIik7DQoNCiAgICAgIGcuc2VsZWN0QWxsKCJwYXRoIikNCiAgICAgICAgLmRhdGEoc29ydGVkR0RQKQ0KICAgICAgICAuZW50ZXIoKQ0KICAgICAgICAuYXBwZW5kKCJwYXRoIikNCiAgICAgICAgLmF0dHIoImQiLCBhcmMpDQogICAgICAgIC5hdHRyKCJmaWxsIiwgKGQsIGkpID0+IGNvbG9yKGkpKQ0KICAgICAgICAuYXR0cigic3Ryb2tlIiwgIiNGRkYiKQ0KICAgICAgICAuYXR0cigic3Ryb2tlLXdpZHRoIiwgIjFweCIpDQogICAgICAgIC5vbigibW91c2VlbnRlciIsIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICBkMy5zZWxlY3QodGhpcykudHJhbnNpdGlvbigpLmR1cmF0aW9uKDIwMCkuYXR0cigib3BhY2l0eSIsIDAuNSk7DQogICAgICAgIH0pIC8vIGRlZmluZSBpbnRlcmFjdGlvbiBmdW5jdGlvbg0KICAgICAgICAub24oIm1vdXNlb3V0IiwgZnVuY3Rpb24gKCkgew0KICAgICAgICAgIGQzLnNlbGVjdCh0aGlzKS50cmFuc2l0aW9uKCkuZHVyYXRpb24oMjAwKS5hdHRyKCJvcGFjaXR5IiwgMSk7DQogICAgICAgIH0pOyAvL2RlZmluZSBpbnRlcmFjdGlvbiBmdW5jdGlvbg0KDQogICAgICBnLnNlbGVjdEFsbCgidGV4dCIpDQogICAgICAgIC5kYXRhKGdkcDEpDQogICAgICAgIC5lbnRlcigpDQogICAgICAgIC5hcHBlbmQoInRleHQiKQ0KICAgICAgICAudGV4dCgoZCkgPT4gYCR7ZC5jb3VudHJ5fSAtICAke2QudmFsdWV9IFRyaWxsaW9uYCkNCiAgICAgICAgLmF0dHIoIngiLCAtMTUwKQ0KICAgICAgICAuYXR0cigiZHkiLCAtOCkNCiAgICAgICAgLmF0dHIoInkiLCAoZCwgaSkgPT4gLShpICsgMSkgKiAyNSk7DQoNCiAgICAgIGcuYXR0cigidHJhbnNmb3JtIiwgInRyYW5zbGF0ZSgyMDAsMzAwKSIpOw0KICAgIH0sDQogICAgY3JlYXRlR3JhcGgoKSB7DQogICAgICB2YXIgdm0gPSB0aGlzOw0KICAgICAgdmFyIHVybCA9ICIvZ2RwIjsNCiAgICAgIHRyeSB7DQogICAgICAgIHdlYmNhbGwuZ2V0KHVybCkudGhlbihhc3luYyBmdW5jdGlvbiAocmVzcG9uc2UpIHsNCiAgICAgICAgICB2YXIgdGVtcCA9IGF3YWl0IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UuZGF0YSkpOw0KICAgICAgICAgIHZtLmdkcCA9IGF3YWl0IHRlbXA7DQogICAgICAgICAgdm0uZ2VuZXJhdGVBcmModm0uZ2RwKTsNCiAgICAgICAgfSk7DQogICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgY29uc29sZS5sb2coImVycm9yIik7DQogICAgICAgIGFsZXJ0KGVycik7DQogICAgICB9DQogICAgfSwNCiAgfSwNCn07DQo="},{"version":3,"sources":["d3vis.vue"],"names":[],"mappings":";;;;;;;;AAQA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"d3vis.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div>\r\n    <v-col id=\"arc\" />\r\n    <p>{{ gdp }}</p>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as d3 from \"d3\";\r\nimport axios from \"axios\";\r\n\r\nvar webcall = axios.create({\r\n  baseURL: \"http://127.0.0.1:5000/\",\r\n  timeout: 20000,\r\n  withCredentials: false,\r\n  headers: { \"Content-Type\": \"application/json\" },\r\n});\r\n\r\nexport default {\r\n  name: \"App\",\r\n  data() {\r\n    return {\r\n      gdp: [],\r\n    };\r\n  },\r\n  mounted() {\r\n    this.createGraph();\r\n  },\r\n  methods: {\r\n    generateArc(gdp) {\r\n      //define the width and height of the graph\r\n      const w = 500;\r\n      const h = 500;\r\n      var gdp1 = gdp;\r\n      //construct the graph in the div arc\r\n      const svg = d3\r\n        .select(\"#arc\")\r\n        .append(\"svg\")\r\n        .attr(\"width\", w)\r\n        .attr(\"height\", h);\r\n\r\n      // Sort data\r\n      const sortedGDP = gdp1.sort((a, b) => (a.value > b.value ? 1 : -1));\r\n\r\n      //Set Color\r\n      const color = d3.scaleOrdinal(d3.schemeDark2);\r\n\r\n      //Get max gdp\r\n      const max_gdp = d3.max(sortedGDP, (o) => o.value);\r\n\r\n      //Define necessary components for graph\r\n      const angleScale = d3\r\n        .scaleLinear()\r\n        .domain([0, max_gdp])\r\n        .range([0, 1.5 * Math.PI]); //Define whether it is going to be a full circle\r\n\r\n      const arc = d3\r\n        .arc()\r\n        .innerRadius((d, i) => (i + 1) * 25)\r\n        .outerRadius((d, i) => (i + 2) * 25)\r\n        .startAngle(angleScale(0))\r\n        .endAngle((d) => angleScale(d.value));\r\n\r\n      // Plug the graph into the region\r\n      const g = svg.append(\"g\");\r\n\r\n      g.selectAll(\"path\")\r\n        .data(sortedGDP)\r\n        .enter()\r\n        .append(\"path\")\r\n        .attr(\"d\", arc)\r\n        .attr(\"fill\", (d, i) => color(i))\r\n        .attr(\"stroke\", \"#FFF\")\r\n        .attr(\"stroke-width\", \"1px\")\r\n        .on(\"mouseenter\", function () {\r\n          d3.select(this).transition().duration(200).attr(\"opacity\", 0.5);\r\n        }) // define interaction function\r\n        .on(\"mouseout\", function () {\r\n          d3.select(this).transition().duration(200).attr(\"opacity\", 1);\r\n        }); //define interaction function\r\n\r\n      g.selectAll(\"text\")\r\n        .data(gdp1)\r\n        .enter()\r\n        .append(\"text\")\r\n        .text((d) => `${d.country} -  ${d.value} Trillion`)\r\n        .attr(\"x\", -150)\r\n        .attr(\"dy\", -8)\r\n        .attr(\"y\", (d, i) => -(i + 1) * 25);\r\n\r\n      g.attr(\"transform\", \"translate(200,300)\");\r\n    },\r\n    createGraph() {\r\n      var vm = this;\r\n      var url = \"/gdp\";\r\n      try {\r\n        webcall.get(url).then(async function (response) {\r\n          var temp = await JSON.parse(JSON.stringify(response.data));\r\n          vm.gdp = await temp;\r\n          vm.generateArc(vm.gdp);\r\n        });\r\n      } catch (err) {\r\n        console.log(\"error\");\r\n        alert(err);\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n\r\n\r\n"]}]}